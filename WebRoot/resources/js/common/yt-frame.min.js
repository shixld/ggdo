$(function(){$yt_common.init()});var $yt_common={common_width:0,left_width:0,html_width:0,setMainWidth:function(){if($(window).width()<this.common_width){this.html_width=this.common_width}else{this.html_width=$(window).width()}var left=(this.html_width-1200)/2;if(left<0){left=0}var main_left=this.left_width+left;var main_width=this.html_width-main_left;console.log("left"+left);$(".left-nav").css("left",left);$(".main-nav").css({width:main_width,left:main_left,"min-width":main_width});$(".head-nav").css({"min-width":this.common_width})},init:function(){$("body").append('<div id="pop-modle-alert"></div>');$left_menu.init();var menuEvent=$('#menu-event'),win=window,docu=document,menuShow=true,winHeight=0;if(win.innerHeight){winHeight=win.innerHeight}else if((docu.body)&&(docu.body.clientHeight)){winHeight=docu.body.clientHeight}menuEvent.css('top',(winHeight/2)-menuEvent.height());menuEvent.click(function(){if(menuShow){$('.table-left-nav').hide();menuEvent.css('left','0').find('img').css('transform','rotateY(180deg)')}else{$('.table-left-nav').show();menuEvent.css('left','200px').find('img').css('transform','rotateY(0deg)')}menuShow=!menuShow});$('.head-top-user').hover(function(){$('#CloseLogin').show()},function(e){$('#CloseLogin').hide()});$('#CloseLogin').hover(function(){$('#CloseLogin').show()},function(e){$('#CloseLogin').hide()});$(window).scroll(function(){$("#yt-index-head-nav").css("left",$(window).scrollLeft()*-1);$(".top-button-list").css("top",$(window).scrollTop()+80);$(".peoper-list-model").css("top",$(window).scrollTop());$("#left-menu-cnt").css("left",$("#yt-index-main-nav").offset().left-$(window).scrollLeft()-$("#left-menu-cnt").width()-17)});$(window).resize(function(){$("#left-menu-cnt").css("left",$("#yt-index-main-nav").offset().left-$(window).scrollLeft()-$("#left-menu-cnt").width()-17)});$("#reqLogin").click(function(){location.href=$yt_option.websit_path+"login.html"})},eventStopPageaction:function(){var e=arguments.callee.caller.arguments[0]||event;if(e&&e.stopPropagation){e.stopPropagation()}else if(window.event){window.event.cancelBubble=true}},getToken:function(){var cookies=document.cookie.split(";");var dynamicKey="";if(cookies.length>0){for(var i=0;i<cookies.length;i+=1){var cookie=cookies[i].split("=");if($.trim(cookie[0])==$yt_common.ytAclCookieKey){dynamicKey=unescape(cookie[1])}}}return dynamicKey}};var $left_menu={menuId:"",twoMenuId:"",init:function(){var me=this;var contentType="application/x-www-form-urlencoded; charset=utf-8";if(window.XDomainRequest){contentType="text/plain"}var systemId=$("#yt-index-head-sys select").val();if($yt_option.is_test){var data=$yt_option.menu_data;$("#menu-list").empty();$.each(data,function(i,n){var className="";if(i==0){className="no-border"}var one_menu=$('<li class="one-menu '+className+'" menuId = "'+n.pkId+'"><div class="one-menu-text"><img class="one-menu-icon" src="resources/images/common/setting.png">'+n.menuName+'</div><ul></ul></li>');$("#menu-list").append(one_menu)});$("#left-menu-cnt .one-menu div").on("click",function(){if($(this).hasClass("check")){$(this).removeClass("check");$(this).next("ul").hide()}else{var one_menu=$(this).parent();var parentMenuId=one_menu.attr("menuId");var data=$yt_option.menu_data_two;one_menu.find("ul").empty();var two_menu="";$.each(data,function(j,m){if(m.parentId==parentMenuId){two_menu=$('<li class="two-menu" menuUrl = "'+m.menuUrl+'"><div title="'+m.menuName+'"> '+m.menuName+'</div></li>')}one_menu.find("ul").append(two_menu);if(two_menu!=""){two_menu.off().on("click",function(){$left_menu.twoMenuId=m.pkId;$("#left-menu-cnt .two-menu").removeClass("two-menu-cli");$(this).addClass("two-menu-cli");me.switchTab(m.pkId,$(this).attr("menuUrl"));$left_menu.menuId=parentMenuId})}});one_menu.find("ul").css("display","block");$("#left-menu-cnt .one-menu .check").next().hide();$("#left-menu-cnt .one-menu div").removeClass("check");$(this).addClass("check")}});var one_menu="";var parentMenuId="";if($left_menu.menuId!=""&&$left_menu.menuId!=null){parentMenuId=$left_menu.menuId;$("#left-menu-cnt .one-menu").each(function(i,n){if($(n).attr("menuid")==$left_menu.menuId){one_menu=$(n)}});one_menu.find(".one-menu-text").addClass("check")}else{one_menu=$("#left-menu-cnt .one-menu div:eq(0)").parent();parentMenuId=one_menu.attr("menuId");$("#left-menu-cnt .one-menu div:eq(0)").addClass("check")}var data=$yt_option.menu_data_two;one_menu.find("ul").empty();var two_menu="";$.each(data,function(j,m){if(m.parentId==parentMenuId){two_menu=$('<li class="two-menu" twoMenuId="'+m.pkId+'" menuUrl = "'+m.menuUrl+'"><div title="'+m.menuName+'">'+m.menuName+'</div></li>')}one_menu.find("ul").append(two_menu);if(two_menu!=""){two_menu.off().on("click",function(){$("#left-menu-cnt .two-menu").removeClass("two-menu-cli");$(this).addClass("two-menu-cli");me.switchTab(m.pkId,$(this).attr("menuUrl"));$left_menu.twoMenuId=m.pkId})}});one_menu.find("ul").css("display","block");if($left_menu.twoMenuId==""){$("#left-menu-cnt .two-menu:eq(0)").addClass("two-menu-cli");$("#left-menu-cnt .two-menu:eq(0)").addClass("check");$("#left-menu-cnt .two-menu:eq(0)").find("div .menu-two-icon").attr("src","resources/images/common/blue-yuan.png")}else{one_menu.find("ul li[twoMenuId='"+$left_menu.twoMenuId+"']").addClass("two-menu-cli");one_menu.find("ul li[twoMenuId='"+$left_menu.twoMenuId+"']").addClass("check");one_menu.find("ul li[twoMenuId='"+$left_menu.twoMenuId+"']").find("div .menu-two-icon").attr("src","resources/images/common/blue-yuan.png")}}else{var clickTwoMenId="";$.ajax({url:$yt_option.base_path+'getMenu',type:'POST',contentType:contentType,success:function(dataStr){var data=$.parseJSON(dataStr);$("#menu-list").empty();$.each(data,function(i,n){var className="";var one_menu=$('<li class="one-menu" menuId = "'+n.pkId+'"  menuOrder ="'+n.menuOrder+'"><div class="one-menu-text"><img class="one-menu-icon" src="resources/images/common/setting.png">'+n.menuName+'</div><ul></ul></li>');$("#menu-list").append(one_menu)});$("#left-menu-cnt .one-menu div").on("click",function(){var one_menu=$(this).parent();var parentMenuId=one_menu.attr("menuId");if($(this).hasClass("check")){$(this).removeClass("check");$(this).next("ul").hide()}else{$.ajax({url:$yt_option.base_path+'getCliedMenu',type:'POST',success:function(dataStr){var data=$.parseJSON(dataStr);one_menu.find("ul").empty();var twoMenuId="";$.each(data,function(j,m){var two_menu=$('<li class="two-menu" twoMenuId="'+m.pkId+'" twoMenUrl= "'+m.menuUrl+'"><div>'+m.menuName+'</div></li>');one_menu.find("ul").append(two_menu);two_menu.click(function(){$("#left-menu-cnt .two-menu").removeClass("two-menu-cli");$("#left-menu-cnt .two-menu").removeClass("check");clickTwoMenId=m.pkId;$(this).addClass("two-menu-cli");$(this).addClass("check");me.switchTab(m.pkId,m.menuUrl)})});one_menu.find("ul").show();if(clickTwoMenId!=""&&clickTwoMenId!=null){$("#left-menu-cnt .two-menu").removeClass("two-menu-cli");$("#left-menu-cnt .two-menu").removeClass("check");one_menu.find("ul li[twoMenuId='"+clickTwoMenId+"']").addClass("two-menu-cli");one_menu.find("ul li[twoMenuId='"+clickTwoMenId+"']").addClass("check")}}});$("#left-menu-cnt .one-menu .check").next().hide();$("#left-menu-cnt .one-menu div").removeClass("check");$(this).addClass("check")}});var one_menu="";var parentMenuId="";if($left_menu.menuId!=""&&$left_menu.menuId!=null){parentMenuId=$left_menu.menuId;$("#left-menu-cnt .one-menu").each(function(i,n){if($(n).attr("menuid")==$left_menu.menuId){one_menu=$(n)}})}else{one_menu=$("#left-menu-cnt .one-menu div:eq(0)").parent();parentMenuId=one_menu.attr("menuId")}$.ajax({url:$yt_option.base_path+'getCliedMenu',type:'POST',data:{"userId":1,"parentMenuId":parentMenuId,"systemId":systemId},success:function(dataStr){var data=$.parseJSON(dataStr);one_menu.find("ul").empty();$.each(data,function(j,m){var two_menu=$('<li class="two-menu"  twoMenuId="'+m.pkId+'" twoMenUrl= "'+m.menuUrl+'"><div>'+m.menuName+'</div></li>');one_menu.find("ul").append(two_menu);two_menu.click(function(){$("#left-menu-cnt .two-menu").removeClass("two-menu-cli");$(this).addClass("two-menu-cli");$("#left-menu-cnt .two-menu").removeClass("check");$(this).addClass("check")});me.switchTab(m.pkId,m.menuUrl)});one_menu.find("ul").show();clickTwoMenId=$("#left-menu-cnt .two-menu:eq(0)").attr("twoMenuId");$("#left-menu-cnt .two-menu:eq(0)").addClass("two-menu-cli");$("#left-menu-cnt .two-menu:eq(0)").addClass("check")}});$("#left-menu-cnt .one-menu div:eq(0)").addClass("check");if($left_menu.menuId!=""&&$left_menu.menuId!=null){$("#menu-list .one-menu").each(function(i,n){if($left_menu.menuId==$(n).attr("menuid")){$("#left-menu-cnt .one-menu div").removeClass("check");$(n).find(".one-text").addClass("check")}});return false}else{$("#left-menu-cnt .one-menu div:eq(0)").addClass("check")}}})}},switchTab:function(menuId,url,twoMenuId){$left_menu.menuId=menuId;$left_menu.twoMenuId=twoMenuId;if(url.indexOf("http://")!=0){url=$yt_option.websit_path+url}$yt_common.request_params={};if(url.indexOf("?")!=-1){var str=url.substr(url.indexOf("?")+1);strs=str.split("&");for(var i=0;i<strs.length;i+=1){$yt_common.request_params[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1])}}else{$yt_common.request_params=null}$("#yt-index-main-nav").html("");$yt_baseElement.showLoading();$.ajax({type:"get",url:url,async:false,success:function(data){$yt_baseElement.hideLoading();$("#yt-index-main-nav").html(data);$(window).scrollTop(0)}});var divMinHei=$(window).height();$(".web-criterion-model").css("min-height",divMinHei)}};(function($){var _ajax=$.ajax;$.addParam=function(oldP,addp){return oldP+"&"+$.param(addp)};$.ajax=function(opt){var fn={error:function(XMLHttpRequest,textStatus,errorThrown){$yt_common.prompt("请求失败,请稍后重试");console.log(opt)},success:function(data,textStatus){},complete:function(XHR,TS){}};if(opt.error){fn.error=opt.error}if(opt.success){fn.success=opt.success}if(opt.url.indexOf("http://")!=0){opt.url=$yt_option.base_path+opt.url}var dynamicKey=$yt_common.getToken();var cookieKey=$yt_common.ytAclCookieKey;var currentUserInfo=$yt_common.user_info;var ytParams={ajax:1};ytParams[cookieKey]=dynamicKey;var gettype=Object.prototype.toString;var contentType="application/x-www-form-urlencoded; charset=utf-8";if($yt_option.is_origin){if(window.XDomainRequest){contentType="text/plain";jQuery.support.cors=true;opt.type="get"}}opt.contentType=contentType;if(opt.data){if(opt.data!=undefined&&gettype.call(opt.data)=="[object Object]"){opt.data[cookieKey]=ytParams[cookieKey];opt.data.ajax=ytParams.ajax;opt.data.systemCode=ytParams.systemCode;opt.data.userItCode=ytParams.userItCode;opt.data.userId=ytParams.userId}else if(opt.data!=undefined){var paramStr=jQuery.param(ytParams);opt.data+="&"+paramStr}}else{opt.data=ytParams}var _opt=$.extend(opt,{error:function(XMLHttpRequest,textStatus,errorThrown){fn.error(XMLHttpRequest,textStatus,errorThrown)},success:function(data,textStatus){var gettype=Object.prototype.toString;try{if((jQuery.parseJSON(data).success==undefined?"":jQuery.parseJSON(data).success.toString())=="1"){$yt_common.login_state=false;var loginUrl=jQuery.parseJSON(data).obj.ssoVerifyAddress;loginUrl=loginUrl.substr(0,loginUrl.indexOf("systemIndex="))+"systemIndex="+window.location.href;console.log(opt.data);location.href=loginUrl}else{$yt_common.login_state=true;data=jQuery.parseJSON(data)}}catch(e){}fn.success(data,textStatus)},complete:function(XHR,TS){fn.complete(XHR,TS)}});return _ajax(_opt)}})(jQuery);