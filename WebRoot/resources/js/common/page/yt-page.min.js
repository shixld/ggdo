/**
 *
 *
 * C(05)分页方法
 *
 *
 * */
var pageInfo={pageSize:10,pageNum:15,total:0,pageDoc:null,init:function(pageIndex,confirmFunction,pageDoc,total,pageSize,pageNum){var me=this;pageDoc.find(".last-page.pointer").unbind().bind("click",function(){var pageIndex=pageDoc.find(".num-text.active").text();pageIndex=parseInt(pageIndex)-1;me.setPage(pageIndex,confirmFunction,pageDoc,total,pageSize,pageNum);confirmFunction(pageIndex);me.bindTrClick();});pageDoc.find(".next-page.pointer").unbind().bind("click",function(){var pageIndex=pageDoc.find(".num-text.active").text();pageIndex=parseInt(pageIndex)+1;me.setPage(pageIndex,confirmFunction,pageDoc,total,pageSize,pageNum);confirmFunction(pageIndex);me.bindTrClick()});pageDoc.find(".num-text").unbind().bind("click",function(){var pageIndex=$(this).text();me.setPage(pageIndex,confirmFunction,pageDoc,total,pageSize,pageNum);confirmFunction(pageIndex);me.bindTrClick()});pageDoc.find(".frist-page.pointer").unbind().bind("click",function(){me.setPage(1,confirmFunction,pageDoc,total,pageSize,pageNum);confirmFunction(1);me.bindTrClick()});pageDoc.find(".end-page.pointer").unbind().bind("click",function(){var pageCount=Math.ceil(total/pageNum);me.setPage(pageCount,confirmFunction,pageDoc,total,pageSize,pageNum);confirmFunction(pageCount);me.bindTrClick()});me.bindTrClick()},bindTrClick:function(){$(".yt-table .yt-tbody tr").unbind().bind("click",function(){$(".yt-table .yt-tbody tr.yt-table-active").removeClass("yt-table-active");$(this).addClass("yt-table-active")})},config:function(pageIndex,confirmFunction,pageNum,pageSize,pageDoc){if(!pageIndex){pageIndex=1}this.total=confirmFunction(pageIndex).total;if(pageNum){this.pageNum=pageNum}else{this.pageNum=15}if(pageSize){this.pageSize=pageSize}else{this.pageSize=10}if(pageDoc){this.pageDoc=$(pageDoc).html('<table><tr></tr></table>')}else{this.pageDoc=$(".opinion-page").html('<table><tr></tr></table>')}this.setPage(pageIndex,confirmFunction,this.pageDoc,this.total,this.pageSize,this.pageNum)},setPage:function(pageIndex,confirmFunction,pageDoc,total,pageSize,pageNum){pageIndex=parseInt(pageIndex);var pageCount=Math.ceil(total/pageNum);pageDoc.find("table tr").empty();var countHtml='<td><div class="data-count">共'+total+'条记录，</div></td><td><div class="data-count page-index">'+pageIndex+'/'+pageCount+'，</div></td>';pageDoc.find("table tr").append(countHtml);var lastButton='<td><div class="last-page"><</div></td>';var lastButtonActive='<td><div class="last-page change-btn pointer"><</div></td>';var nextButton='<td><div class="next-page">></div></td>';var nextButtonActive='<td><div class="next-page change-btn pointer">></div></td>';var firstButton='<td><div class="frist-page">首页</div></td>';var firstButtonAction='<td><div class="frist-page pointer">首页</div></td>';var endButton='<td><div class="end-page">尾页</div></td>';var endButtonAction='<td><div class="end-page pointer">尾页</div></td>';if(pageCount<=pageSize+1){if(pageIndex>1){pageDoc.find("table tr").append(firstButtonAction);pageDoc.find("table tr").append(lastButtonActive)}else{pageDoc.find("table tr").append(firstButton);pageDoc.find("table tr").append(lastButton)}for(var int=1;int<=pageCount;int+=1){var pageHtml='<td><div class="num-text change-btn pointer">'+int+'</div></td>';if(int==pageIndex){var pageHtml='<td><div class="num-text change-btn active">'+int+'</div></td>'}pageDoc.find("table tr").append(pageHtml)}if(pageIndex<pageCount){pageDoc.find("table tr").append(nextButtonActive);pageDoc.find("table tr").append(endButtonAction)}else{pageDoc.find("table tr").append(nextButton);pageDoc.find("table tr").append(endButton)}}else if(pageCount>pageSize+1&&pageIndex<=pageSize-1){if(pageIndex>1){pageDoc.find("table tr").append(firstButtonAction);pageDoc.find("table tr").append(lastButtonActive)}else{pageDoc.find("table tr").append(firstButton);}for(var int=1;int<=pageSize;int+=1){var pageHtml='<td><div class="num-text change-btn pointer">'+int+'</div></td>';if(int==pageIndex){var pageHtml='<td><div class="num-text change-btn active">'+int+'</div></td>'}pageDoc.find("table tr").append(pageHtml)}var pageHtml='<td><div class="">···</div></td>';pageDoc.find("table tr").append(pageHtml);pageDoc.find("table tr").append(nextButtonActive);pageDoc.find("table tr").append(endButtonAction)}else if(pageCount>pageSize+1&&pageIndex>=pageCount-pageSize+2){pageDoc.find("table tr").append(firstButtonAction);pageDoc.find("table tr").append(lastButtonActive);var pageHtml='<td><div class="">···</div></td>';pageDoc.find("table tr").append(pageHtml);for(var int=pageCount-pageSize+1;int<=pageCount;int+=1){var pageHtml='<td><div class="num-text change-btn pointer">'+int+'</div></td>';if(int==pageIndex){var pageHtml='<td><div class="num-text change-btn active">'+int+'</div></td>'}pageDoc.find("table tr").append(pageHtml)}if(pageIndex<pageCount){pageDoc.find("table tr").append(nextButtonActive);pageDoc.find("table tr").append(endButtonAction)}else{pageDoc.find("table tr").append(endButton)}}else{pageDoc.find("table tr").append(firstButtonAction);pageDoc.find("table tr").append(lastButtonActive);var pageHtml='<td><div class="">···</div></td>';pageDoc.find("table tr").append(pageHtml);var pageSizeNum=pageSize%2==0?pageSize/2:Math.ceil(pageSize/2)-1;for(var int=pageIndex-pageSizeNum;int<=pageIndex+pageSizeNum;int+=1){var pageHtml='<td><div class="num-text change-btn pointer">'+int+'</div></td>';if(int==pageIndex){var pageHtml='<td><div class="num-text change-btn active">'+int+'</div></td>'}pageDoc.find("table tr").append(pageHtml)}var pageHtml='<td><div class="">···</div></td>';pageDoc.find("table tr").append(pageHtml);pageDoc.find("table tr").append(nextButtonActive);pageDoc.find("table tr").append(endButtonAction)}this.init(pageIndex,confirmFunction,pageDoc,total,pageSize,pageNum)}};